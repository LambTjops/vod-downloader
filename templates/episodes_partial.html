<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
    <button 
        onclick="window.location.reload()" 
        style="padding: 0.75rem 1.5rem; border-radius: 8px; font-weight: 500; background: #1e293b; color: #f1f5f9; border: 1.5px solid #334155; cursor: pointer; transition: all 0.2s ease;"
        onmouseover="this.style.borderColor='#667eea'; this.style.color='#667eea';"
        onmouseout="this.style.borderColor='#334155'; this.style.color='#f1f5f9';">
        â† Back to Categories
    </button>
    
    <button 
        hx-get="/queue/batch_series/{{ series_id }}"
        hx-target="#status-bar-container"
        hx-swap="innerHTML"
        style="padding: 0.75rem 1.5rem; border-radius: 8px; font-weight: 600; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; border: none; cursor: pointer; transition: all 0.2s ease; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);"
        onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)';"
        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)';">
        ğŸ“¥ Download All Episodes
    </button>
</div>

<div id="status-bar-container" style="margin-bottom: 2rem;">
    {% include 'progress_bar.html' ignore missing %}
</div>

<hr style="border-color: #334155; margin: 2rem 0;"/>

<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1.5rem;">
    {% for ep in episodes %}
    <article style="background: #1e293b; border-radius: 12px; overflow: hidden; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); border: 1px solid #334155; display: flex; flex-direction: column; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); margin: 0;"
             onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)'; this.style.borderColor='#667eea';"
             onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)'; this.style.borderColor='#334155';">
        <header style="padding: 1rem; font-size: 1rem; font-weight: 600; color: #f1f5f9; background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);">
            <span style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.85rem; margin-right: 0.5rem;">S{{ ep.season }}E{{ ep.episode_num }}</span>
        </header>
        
        {% if ep.info and ep.info.movie_image %}
        <img src="{{ ep.info.movie_image }}" 
             style="height: 200px; width: 100%; object-fit: cover; display: block;"
             loading="lazy"
             alt="Episode {{ ep.episode_num }}"
             onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
        <div style="height: 200px; background: linear-gradient(135deg, #1e293b 0%, #334155 100%); display: none; align-items: center; justify-content: center; color: #94a3b8;">
            <span>ğŸ“º</span>
        </div>
        {% else %}
        <div style="height: 200px; background: linear-gradient(135deg, #1e293b 0%, #334155 100%); display: flex; align-items: center; justify-content: center; color: #94a3b8;">
            <span>ğŸ“º</span>
        </div>
        {% endif %}
        
        <div style="padding: 1rem; flex-grow: 1;">
            <p style="margin: 0; color: #94a3b8; font-size: 0.9rem; line-height: 1.5;">{{ ep.title }}</p>
        </div>

        <footer style="padding: 1rem; margin-top: auto;">
            {% set full_name = series_name ~ " - S" ~ ep.season ~ "E" ~ ep.episode_num ~ " - " ~ ep.title %}
            <button 
                hx-get="/queue/add/series/{{ ep.id }}/{{ ep.container_extension }}?title={{ full_name }}"
                hx-swap="none"
                onclick="this.textContent='âœ“ Added!'; setTimeout(() => this.textContent='ğŸ“¥ Add to Queue', 2000);"
                style="width: 100%; padding: 0.75rem 1rem; border-radius: 8px; font-weight: 500; transition: all 0.2s ease; border: 1.5px solid #334155; background: transparent; color: #f1f5f9; cursor: pointer;"
                onmouseover="this.style.borderColor='#667eea'; this.style.color='#667eea'; this.style.background='rgba(102, 126, 234, 0.1)';"
                onmouseout="this.style.borderColor='#334155'; this.style.color='#f1f5f9'; this.style.background='transparent';">
                ğŸ“¥ Add to Queue
            </button>
        </footer>
    </article>
    {% endfor %}
</div>